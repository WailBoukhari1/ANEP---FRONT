import{r as c,j as e}from"./index-BTXBHzIc.js";import{P as z}from"./index-iVo4PhEO.js";import{A as H,P as A,a as o,T as d,b as S,I as B}from"./AdminLayout-CAfH-yhE.js";import{u as M}from"./index-N7wE-vYa.js";import{R as Q,d as X,a as Y,b as Z}from"./quill.snow-ChtjAMyt.js";import{T as u,F as p,I as x,S as g,B as m}from"./TextField-BPD9SszU.js";import{F as K,C as ee,A as te}from"./FormControlLabel-DTGmWSPN.js";import{G as n}from"./Grid-BEjnIwqi.js";import{C as y,a as b}from"./CardContent-CbT0KjTf.js";const R=[{label:"John Doe",id:1},{label:"Jane Smith",id:2},{label:"Alice Johnson",id:3},{label:"Bob Brown",id:4}],se={name:["User 1","User 2","User 3"],service:["Service 1","Service 2","Service 3"],department:["Department A","Department B","Department C"],grade:["Grade X","Grade Y","Grade Z"]};function ie({courseId:D}){const[r,a]=c.useState({title:"Advanced React",imageUrl:"",offline:"online",description:"Learn advanced patterns in React",notifyUsers:!0,hidden:"visible",budget:"500",notification:[],sessions:[{startTime:"2023-10-01T09:00",endTime:"2023-10-01T11:00",instructorType:"internal",instructorName:"John Doe"}],image:null});c.useEffect(()=>{a({title:"Advanced React",imageUrl:"",offline:"online",description:"Learn advanced patterns in React",notifyUsers:!0,hidden:"visible",budget:"500",notification:[],sessions:[{startTime:"2023-10-01T09:00",endTime:"2023-10-01T11:00",instructorType:"internal",instructorName:"John Doe"}],image:null})},[D]);const F=c.useCallback(t=>{const s=t[0];s&&a(i=>({...i,image:Object.assign(s,{preview:URL.createObjectURL(s)})}))},[]),{getRootProps:k,getInputProps:I,isDragActive:W}=M({onDrop:F}),j=(t,s)=>{const{name:i,value:l}=t.target,h=[...r.sessions];h[s][i]=l,a(v=>({...v,sessions:h}))},O=()=>{a(t=>({...t,sessions:[...t.sessions,{startTime:"",endTime:"",instructorType:"",instructorName:""}]}))},$=()=>{const t=r.sessions[r.sessions.length-1];a(s=>({...s,sessions:[...s.sessions,{...t}]}))},P=t=>{a(s=>({...s,sessions:s.sessions.filter((i,l)=>l!==t)}))},L=t=>{t.preventDefault(),console.log("Updated course data:",r)},T=Array.from({length:20},(t,s)=>({id:s+1,name:`User ${s+1}`,service:`Service ${s%5}`,localite:`Localite ${s%4}`,fonction:`Fonction ${s%3}`,departementDivision:`Department ${s%4}`,affectation:`Affectation ${s%5}`,gradeAssimile:`Grade ${s%3}`,gradeFonction:`GradeF ${s%2}`,codPos:`CP${s%5}`,sitFAg:`Situation ${s%2}`})),[C,E]=c.useState({service:"",localite:"",fonction:"",departementDivision:"",affectation:"",gradeAssimile:"",gradeFonction:"",codPos:""}),G=T.filter(t=>Object.entries(C).every(([s,i])=>!i||t[s].includes(i))),[q,f]=c.useState([]),w=t=>{f(s=>[...s,t]),setUsers(s=>s.filter(i=>i.id!==t.id))},J=t=>{f(i=>i.filter(l=>l.id!==t));const s=T.find(i=>i.id===t);s&&setFilteredUsers(i=>[...i,s])},[_,U]=c.useState([{id:101,name:"User 101"},{id:102,name:"User 102"}]),N=t=>{f(s=>[...s,t]),U(s=>s.filter(i=>i.id!==t.id))},V=t=>{U(s=>s.filter(i=>i.id!==t))};return e.jsxs(H,{children:[e.jsxs("form",{onSubmit:L,style:{padding:"24px",backgroundColor:"#fff",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px"},children:[e.jsx(u,{label:"Title",name:"title",value:r.title,onChange:t=>a(s=>({...s,title:t.target.value})),required:!0,fullWidth:!0,style:{marginBottom:"16px"}}),e.jsxs("div",{...k(),style:{border:"2px dashed #ccc",padding:"16px",marginBottom:"16px",textAlign:"center"},children:[e.jsx("input",{...I()}),e.jsx(A,{elevation:0,style:{padding:"16px"},children:W?e.jsx("p",{children:"Drop the image here..."}):e.jsx("p",{children:"Drag 'n' drop an image here, or click to select an image"})}),r.image&&e.jsx("img",{src:r.image.preview,alt:"Preview",style:{marginTop:"16px",maxWidth:"100%",height:"auto"}})]}),e.jsxs(p,{fullWidth:!0,style:{marginBottom:"16px"},children:[e.jsx(x,{children:"Offline/Online"}),e.jsxs(g,{name:"offline",value:r.offline,label:"Offline/Online",onChange:t=>a(s=>({...s,offline:t.target.value})),required:!0,children:[e.jsx(o,{value:"online",children:"Online"}),e.jsx(o,{value:"offline",children:"Offline"})]})]}),e.jsx(p,{fullWidth:!0,style:{marginBottom:"16px"},children:e.jsx(Q,{theme:"snow",value:r.description,onChange:t=>a(s=>({...s,description:t}))})}),e.jsx(K,{control:e.jsx(ee,{checked:r.notifyUsers,onChange:t=>a(s=>({...s,notifyUsers:t.target.checked}))}),label:"Notify Users",style:{marginBottom:"16px"}}),e.jsxs(p,{fullWidth:!0,style:{marginBottom:"16px"},children:[e.jsx(x,{children:"Visibility"}),e.jsxs(g,{name:"hidden",value:r.hidden,label:"Visibility",onChange:t=>a(s=>({...s,hidden:t.target.value})),required:!0,children:[e.jsx(o,{value:"visible",children:"Visible"}),e.jsx(o,{value:"hidden",children:"Hidden"})]})]}),e.jsx(u,{label:"Budget",name:"budget",value:r.budget,onChange:t=>a(s=>({...s,budget:t.target.value})),required:!0,fullWidth:!0,type:"number",style:{marginBottom:"16px"}}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx(d,{variant:"h6",children:"Sessions"}),r.sessions.map((t,s)=>e.jsxs(A,{elevation:1,style:{padding:"16px",marginBottom:"16px"},children:[e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(u,{label:"Start Time",name:"startTime",type:"datetime-local",value:t.startTime,onChange:i=>j(i,s),fullWidth:!0})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(u,{label:"End Time",name:"endTime",type:"datetime-local",value:t.endTime,onChange:i=>j(i,s),fullWidth:!0})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(p,{fullWidth:!0,children:[e.jsx(x,{children:"Instructor Type"}),e.jsxs(g,{name:"instructorType",value:t.instructorType,onChange:i=>j(i,s),fullWidth:!0,children:[e.jsx(o,{value:"internal",children:"Internal"}),e.jsx(o,{value:"external",children:"External"})]})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(te,{options:R,getOptionLabel:i=>i.label,value:R.find(i=>i.label===t.instructorName)||null,onChange:(i,l)=>{const h=[...r.sessions];h[s].instructorName=l?l.label:"",a(v=>({...v,sessions:h}))},renderInput:i=>e.jsx(u,{...i,label:"Instructor Name"}),fullWidth:!0})})]}),e.jsxs("div",{style:{marginTop:"16px",textAlign:"right"},children:[e.jsx(S,{title:"Duplicate Session",children:e.jsx(B,{onClick:$,children:e.jsx(X,{})})}),e.jsx(S,{title:"Remove Session",children:e.jsx(B,{onClick:()=>P(s),children:e.jsx(Y,{})})})]})]},s)),e.jsx(m,{variant:"outlined",onClick:O,startIcon:e.jsx(Z,{}),style:{marginTop:"16px"},children:"Add Session"})]})]}),e.jsxs("div",{children:[e.jsx(d,{variant:"h6",style:{marginTop:"24px",marginBottom:"16px"},children:"Filter Users"}),e.jsx(n,{container:!0,spacing:2,style:{marginBottom:"16px"},children:Object.entries(se).map(([t,s])=>e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(p,{fullWidth:!0,children:[e.jsx(x,{children:t.charAt(0).toUpperCase()+t.slice(1)}),e.jsxs(g,{name:t,value:C[t],onChange:i=>E(l=>({...l,[t]:i.target.value})),children:[e.jsx(o,{value:"",children:e.jsx("em",{children:"None"})}),s.map((i,l)=>e.jsx(o,{value:i,children:i},l))]})]})},t))}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsxs(n,{item:!0,xs:6,children:[e.jsx(d,{variant:"h6",style:{marginTop:"24px",marginBottom:"16px"},children:"Filtered Users"}),e.jsx(n,{container:!0,spacing:2,children:G.map(t=>e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{children:e.jsxs(b,{children:[e.jsx(d,{variant:"h6",children:t.name}),e.jsx(m,{variant:"contained",color:"primary",onClick:()=>w(t),style:{marginRight:"8px"},children:"Assign"})]})})},t.id))})]}),e.jsxs(n,{item:!0,xs:6,children:[e.jsx(d,{variant:"h6",style:{marginTop:"24px",marginBottom:"16px"},children:"Assigned Users"}),e.jsx(n,{container:!0,spacing:2,children:q.map(t=>e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{children:e.jsxs(b,{children:[e.jsx(d,{variant:"h6",children:t.name}),e.jsx(m,{variant:"contained",color:"secondary",onClick:()=>J(t.id),children:"Remove"})]})})},t.id))})]})]}),e.jsx(d,{variant:"h6",style:{marginTop:"24px",marginBottom:"16px"},children:"Interested Users"}),e.jsx(n,{container:!0,spacing:2,children:_.map(t=>e.jsx(n,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{children:e.jsxs(b,{children:[e.jsx(d,{variant:"h6",children:t.name}),e.jsx(m,{variant:"contained",color:"primary",onClick:()=>N(t),style:{marginRight:"8px"},children:"Assign"}),e.jsx(m,{variant:"contained",color:"secondary",onClick:()=>V(t.id),children:"Reject"})]})})},t.id))}),e.jsx(m,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,style:{padding:"12px",marginTop:"28px"},children:"Edit Course"})]})]})}ie.propTypes={courseId:z.string.isRequired};export{ie as default};
